version: "2"

services:
  selenium:
    image: selenium/standalone-chrome
    volumes:
      - /dev/shm:/dev/shm
    links: # Link selenium with webserver container.
      - nginx

  behat:
    image: bergil/docker-behat
    environment:
      DOCKER_TESTING_ENVIRONMENT: 1 # 1 for testing sites on docker containers 0 for non-Docker enviroments.
      COMPOSER_UPDATE: 0 # 1 to update composer before running test. Composer.json must be mounted to behat container.
    volumes:
      - {some path}/behat.yml:/srv/behat.yml # Mount behat.yml file as /srv/behat.yml.
      - {some path}/features:/srv/features # Mount features folder as /srv/features.
      - {some path}/artifacts:/srv/artifacts # Mount artifacts folder as /srv/artifacts.
      - {some path}/drupal8:/drupal  # Mount drupal root directory as /drupal (optional).
     # - {some path}/composer.json:/srv/composer.json # Mount composer.json as /srv/composer.json for composer update (optional).
    links: # Link behat with selenium, webserver, database and web containers.
      - selenium
      - nginx
      - mariadb
      - php
     depends_on: # Set after what services behat container shall start.
      - selenium
      - nginx
      - php
      - mariadb
